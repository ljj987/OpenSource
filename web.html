<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./css/web.css">
    <link rel="stylesheet" href="./css/taiji1.css">
    <title>我的web案例</title>
    <script src="http://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://files.cnblogs.com/files/quaint/sakuraPlus.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
</head>
<body>
        <div id="appBox">
        <div class="box">
            <div class="left">
                <div class="right"></div>
            </div>
            <div class="left1">
                <div class="right1"></div>
            </div>
        </div>
        <img class="img" src="./images/tubiao2.png" alt="">
        </div>
        <div id="appBar">
        <ul>
            <li><a href="./index.html">首页</a></li>
            <li class="active"><a href="./web.html">web案例</a></li>
            <li><a href="#">Echarts案例</a></li>
            <li><a href="#">我的文章</a></li>
            <li><a href="./geren.html">关于我</a></li>
            <li id="slide"></li>
        </ul>
        <div class="search-box">
            <input type="text" class="search-txt" placeholder="search">
            <div class="search-btn">
                <a href="#">
                    <i class="fas fa-search"></i>
                </a>
            </div>
        </div>
        <script type="text/javascript">
            var text = document.querySelector(".search-txt");
            var btn = document.querySelector(".search-btn");
            function search() {
                var textcontent = text.value;
                location.href = "https://cn.bing.com/search?q=" + textcontent;
            }
            btn.addEventListener("click", search);
            
            $(document).ready(function(){
                $('li').on('click', function(){
                    $(this).siblings().removeClass('active');
                    $(this).addClass('active');
                })
            })
           
        </script>

        </div>
       
    <div class="row">
        <div class="column left">
        
        </div>
  
        <div class="column middle">
            <div class="inBox" id="inBox">
                <div class="inner">
                    <!--轮播图-->
                    <ul>
                        <li><a href="./src/book/book.html"><img src="./images/bok1.png" alt=""></a></li>
                        <li><a href="./src/donghua/denglu.html"><img src="./images/denglu1.png" alt=""></a></li>
                        <li><a href="./src/donghua/yingwu.html"><img src="./images/YW1-1.png" alt=""></a></li>
                        <li><a href="./src/donghua/xuehua.html"><img src="./images/xuehua.png" alt=""></a></li>
                        <li><a href="./src/donghua/paopao.html"><img src="./images/paopao.png" alt=""></a></li>
                    </ul>
             
                    <ol class="bar">
             
                    </ol>
                    <!--左右焦点-->
                    <div id="arr">
                                <span id="left">《</span>
                        <span id="right">》</span>
                    </div>
                </div>
            </div>
            <script>
                /**
                 *
                 * @param id  传入元素的id
                 * @returns {HTMLElement | null}  返回标签对象，方便获取元素
                 */
                function my$(id) {
                    return document.getElementById(id);
                }
             
                //获取各元素，方便操作
                var box=my$("inBox");
                var inner=box.children[0];
                var ulObj=inner.children[0];
                var list=ulObj.children;
                var olObj=inner.children[1];
                var arr=my$("arr");
                var imgWidth=inner.offsetWidth;
                var right=my$("right");
                var pic=0;
                //根据li个数，创建小按钮
                for(var i=0;i<list.length;i++){
                    var liObj=document.createElement("li");
             
                    olObj.appendChild(liObj);
                    liObj.innerText=(i+1);
                    liObj.setAttribute("index",i);
             
                    //为按钮注册mouseover事件
                    liObj.onmouseover=function () {
                        //先清除所有按钮的样式
             
                        for (var j=0;j<olObj.children.length;j++){
                            olObj.children[j].removeAttribute("class");
                        }
                        this.className="current";
                        pic=this.getAttribute("index");
                        animate(ulObj,-pic*imgWidth);
                    }
             
                }
             
             
                //设置ol中第一个li有背景颜色
                olObj.children[0].className = "current";
                //克隆一个ul中第一个li,加入到ul中的最后=====克隆
                ulObj.appendChild(ulObj.children[0].cloneNode(true));
             
                var timeId=setInterval(onmouseclickHandle,1000);
                //左右焦点实现点击切换图片功能
                box.onmouseover=function () {
                    arr.style.display="block";
                    clearInterval(timeId);
                };
                box.onmouseout=function () {
                    arr.style.display="none";
                    timeId=setInterval(onmouseclickHandle,1000);
                };
             
                right.onclick=onmouseclickHandle;
                function onmouseclickHandle() {
                    //如果pic的值是5,恰巧是ul中li的个数-1的值,此时页面显示第六个图片,而用户会认为这是第一个图,
                    //所以,如果用户再次点击按钮,用户应该看到第二个图片
                    if (pic == list.length - 1) {
                        //如何从第6个图,跳转到第一个图
                        pic = 0;//先设置pic=0
                        ulObj.style.left = 0 + "px";//把ul的位置还原成开始的默认位置
                    }
                    pic++;//立刻设置pic加1,那么此时用户就会看到第二个图片了
                    animate(ulObj, -pic * imgWidth);//pic从0的值加1之后,pic的值是1,然后ul移动出去一个图片
                    //如果pic==5说明,此时显示第6个图(内容是第一张图片),第一个小按钮有颜色,
                    if (pic == list.length - 1) {
                        //第五个按钮颜色干掉
                        olObj.children[olObj.children.length - 1].className = "";
                        //第一个按钮颜色设置上
                        olObj.children[0].className = "current";
                    } else {
                        //干掉所有的小按钮的背景颜色
                        for (var i = 0; i < olObj.children.length; i++) {
                            olObj.children[i].removeAttribute("class");
                        }
                        olObj.children[pic].className = "current";
                    }
                }
                left.onclick=function () {
                    if (pic==0){
                        pic=list.length-1;
                        ulObj.style.left=-pic*imgWidth+"px";
                    }
                    pic--;
                    animate(ulObj,-pic*imgWidth);
                    for (var i = 0; i < olObj.children.length; i++) {
                        olObj.children[i].removeAttribute("class");
                    }
                    //当前的pic索引对应的按钮设置颜色
                    olObj.children[pic].className = "current";
                };
             
                //设置任意的一个元素,移动到指定的目标位置
                function animate(element, target) {
                    clearInterval(element.timeId);
                    //定时器的id值存储到对象的一个属性中
                    element.timeId = setInterval(function () {
                        //获取元素的当前的位置,数字类型
                        var current = element.offsetLeft;
                        //每次移动的距离
                        var step = 10;
                        step = current < target ? step : -step;
                        //当前移动到位置
                        current += step;
                        if (Math.abs(current - target) > Math.abs(step)) {
                            element.style.left = current + "px";
                        } else {
                            //清理定时器
                            clearInterval(element.timeId);
                            //直接到达目标
                            element.style.left = target + "px";
                        }
                    }, 10);
                }
            </script>
       
        </div>
  
        <div class="column right">
            <div id="calendarElement">
                <div class="header">
                 <div class="prev">
                  <i class="previ"></i>
                 </div>
                 <div class="date"></div>
                 <div class="next">
                  <i class="nexti"></i>
                 </div>
                </div>
                <div class="content">
                 <div class="week">
                  <div>日</div>
                  <div>一</div>
                  <div>二</div>
                  <div>三</div>
                  <div>四</div>
                  <div>五</div>
                  <div>六</div>
                 </div>
                 <div class="weekMany clearfloat">
                 </div>
                </div>
            </div>
            <div id="linkweb">
            </div>
            <script type="text/javascript">
                var currentTime="";   //当前时间年月日
                var dom=document.querySelector("#calendarElement");       //承载元素
                var color="";
                getCurrentTime();
                randomColor();
                showDay();
                function getCurrentTime(){ //获取当前时间
                var time=new Date();
                var year=time.getFullYear();
                var month=time.getMonth()+1;
                var day=time.getDate();
                if(month<10){
                month="0"+month;
                }
                var data=year+ "-" +month;
                currentTime=year+ "-" +month+"-"+day;
                document.querySelector(".date").innerHTML=data;
                }
                dom.addEventListener("click",function(e){
                if(e.target.className=="previ" || e.target.className=="prev"){
                            getMonths("prev");
                }else if(e.target.className=="nexti" || e.target.className=="next"){
                getMonths("next");
                }
                });
                function showDay(){
                var html="";
                var MonthOne=currentTime;
                var yearMonth=currentTime.split('-').slice(0,2);
                yearMonth=yearMonth.join('-');
                document.querySelector(".date").innerHTML=yearMonth;
                MonthOne=MonthOne.split('');
                MonthOne.splice(8,2,"01");
                MonthOne=MonthOne.join('');
                var monthLen=getMonthLength(MonthOne);  //每月有多少天
                var weekMany=new Date(MonthOne).getDay();  //每月一号是星期几
                html+=getPrevMonthHtml(weekMany);
                html+=getNowMonthHtml(monthLen);
                html+=getNextMonthHtml(weekMany,monthLen);
                document.querySelector(".weekMany").innerHTML=html;
                }
                function getPrevMonthHtml(weekMany){
                var html="";
                var lastMonth=currentTime.substring(0, 7);  //得出年月
                lastMonth=lastMonth.split('-');
                if(lastMonth[1]-1==0){
                lastMonth[1]=12;
                lastMonth[0]=lastMonth[0]-1;
                }else if(lastMonth[1]-1<10){
                lastMonth[1]="0"+(lastMonth[1]-1);
                }
                lastMonth=lastMonth.join('-');
                var monthLen=getMonthLength(lastMonth);
                var start=monthLen-weekMany;
                for(var i=start+1;i<=monthLen;i++){
                html+='<div class="otherMonth day" data-date="'+lastMonth+'-'+i+'">'+i+'</div>';
                }
                return html;
                }
                function getNowMonthHtml(monthLen){
                var html="";
                var MonthOne=currentTime.substring(0, 7);  //得出年月
                var today=currentTime.split('-')[2];
                for(var i=1;i<=monthLen;i++){
                if(i<10){
                var q = "0"+i;
                }else{
                var q = i;
                }
                if(i==today){
                 html += '<div class="thisMonth day" style="background-color:'+color+';color:#fff" data-date="'+MonthOne+'-'+q+'">'+i+'</div>';
                }else{
                html+='<div class="thisMonth day" data-date="'+MonthOne+'-'+q+'">'+i+'</div>';
                }
                }
                return html;
                }
                function getNextMonthHtml(weekMany,monthLen){
                var html="";
                var daynum=weekMany+monthLen;
                if(daynum % 7 == 0){
                return html;
                }else{
                            var num= daynum % 7;
                var lessNum=7-num;  //差几天
                var lowerMonth=currentTime.substring(0, 7);  //得出年月
                lowerMonth=lowerMonth.split('-');
                if(lowerMonth[1]+1==13){
                lowerMonth[1]="0"+1;
                lowerMonth[0]=+lowerMonth[0]+1;
                }else{
                 lowerMonth[1]=+lowerMonth[1]+1;
                if(lowerMonth[1]<10){
                    lowerMonth[1]="0"+lowerMonth[1];
                }
                }
                lowerMonth=lowerMonth.join('-');
                for(var i=1;i<=lessNum;i++){
                if(i<10){
                    var q="0"+i;
                }
                html+='<div class="otherMonth day" data-date="'+lowerMonth+'-'+q+'">'+i+'</div>';
                }
                }
                return html;
                }
                function getMonths(around){
                if(around=="prev"){
                currentTime=currentTime.split('-');
                currentTime[1]=currentTime[1]-1;
                if(currentTime[1]==0){
                currentTime[1]="12";
                currentTime[0]=+currentTime[0]-1;
                }
                if(currentTime[1]<10){
                currentTime[1]="0"+currentTime[1];
                }
                currentTime=currentTime.join('-');
                showDay();
                }else if(around=="next"){
                currentTime=currentTime.split('-');
                currentTime[1]=+currentTime[1]+1;
                if(currentTime[1]==13){
                currentTime[1]="1";
                currentTime[0]=+currentTime[0]+1;
                }
                if(currentTime[1]<10){
                currentTime[1]="0"+currentTime[1];
                }
                currentTime=currentTime.join('-');
                showDay();
                }
                }
 
                function getMonthLength(date) {  // 获取每月有多少天
                let d = new Date(date);
                // 将日期设置为下月一号
                d.setMonth(d.getMonth()+1);
                d.setDate('1');
                // 获取本月最后一天
                d.setDate(d.getDate()-1);
                return d.getDate();
                }
                function randomColor(){   //随机颜色
                color = '#'+Math.floor(Math.random()*16777215).toString(16); 
                if(color.length==6){
                color+="0";
                }
                document.querySelector(".header").style.backgroundColor=color;
                document.querySelector(".week").style.backgroundColor=color;
                }
                setInterval("linkweb.innerHTML=new Date().toLocaleString()+' 星期'+'日一二三四五六'.charAt(new Date().getDay());",1000);
            </script>   
        </div>
    </div>
    
</body>
</html>

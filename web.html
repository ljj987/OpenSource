<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./css/web.css">
    <link rel="stylesheet" href="./css/taiji1.css">
    <title>我的web案例</title>
    <script src="http://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://files.cnblogs.com/files/quaint/sakuraPlus.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
</head>
<body>
        <div id="appBox">
        <div class="box">
            <div class="left">
                <div class="right"></div>
            </div>
            <div class="left1">
                <div class="right1"></div>
            </div>
        </div>
        <img class="img" src="./images/tubiao2.png" alt="">
        </div>
        <div id="appBar">
        <ul>
            <li><a href="./index.html">首页</a></li>
            <li class="active"><a href="./web.html">web案例</a></li>
            <li><a href="#">Echarts案例</a></li>
            <li><a href="#">我的文章</a></li>
            <li><a href="./geren.html">关于我</a></li>
            <li id="slide"></li>
        </ul>
        <div class="search-box">
            <input type="text" class="search-txt" placeholder="search">
            <div class="search-btn">
                <a href="#">
                    <i class="fas fa-search"></i>
                </a>
            </div>
        </div>
        <script type="text/javascript">
            var text = document.querySelector(".search-txt");
            var btn = document.querySelector(".search-btn");
            function search() {
                var textcontent = text.value;
                location.href = "https://cn.bing.com/search?q=" + textcontent;
            }
            btn.addEventListener("click", search);
            
            $(document).ready(function(){
                $('li').on('click', function(){
                    $(this).siblings().removeClass('active');
                    $(this).addClass('active');
                })
            })
           
        </script>

        </div>
       
    <div class="row">
        <div class="column left">
        
        </div>
  
        <div class="column middle">
            <div class="inBox" id="inBox">
                <div class="inner">
                    <!--轮播图-->
                    <ul>
                        <li><a href="./src/book/book.html"><img src="./images/bok1.png" alt=""></a></li>
                        <li><a href="./src/donghua/denglu.html"><img src="./images/denglu1.png" alt=""></a></li>
                        <li><a href="./src/donghua/yingwu.html"><img src="./images/YW1-1.png" alt=""></a></li>
                        <li><a href="./src/donghua/xuehua.html"><img src="./images/xuehua.png" alt=""></a></li>
                        <li><a href="./src/donghua/paopao.html"><img src="./images/paopao.png" alt=""></a></li>
                    </ul>
             
                    <ol class="bar">
             
                    </ol>
                    <!--左右焦点-->
                    <div id="arr">
                                <span id="left">《</span>
                        <span id="right">》</span>
                    </div>
                </div>
            </div>
            <script>
                /**
                 *
                 * @param id  传入元素的id
                 * @returns {HTMLElement | null}  返回标签对象，方便获取元素
                 */
                function my$(id) {
                    return document.getElementById(id);
                }
             
                //获取各元素，方便操作
                var box=my$("inBox");
                var inner=box.children[0];
                var ulObj=inner.children[0];
                var list=ulObj.children;
                var olObj=inner.children[1];
                var arr=my$("arr");
                var imgWidth=inner.offsetWidth;
                var right=my$("right");
                var pic=0;
                //根据li个数，创建小按钮
                for(var i=0;i<list.length;i++){
                    var liObj=document.createElement("li");
             
                    olObj.appendChild(liObj);
                    liObj.innerText=(i+1);
                    liObj.setAttribute("index",i);
             
                    //为按钮注册mouseover事件
                    liObj.onmouseover=function () {
                        //先清除所有按钮的样式
             
                        for (var j=0;j<olObj.children.length;j++){
                            olObj.children[j].removeAttribute("class");
                        }
                        this.className="current";
                        pic=this.getAttribute("index");
                        animate(ulObj,-pic*imgWidth);
                    }
             
                }
             
             
                //设置ol中第一个li有背景颜色
                olObj.children[0].className = "current";
                //克隆一个ul中第一个li,加入到ul中的最后=====克隆
                ulObj.appendChild(ulObj.children[0].cloneNode(true));
             
                var timeId=setInterval(onmouseclickHandle,1000);
                //左右焦点实现点击切换图片功能
                box.onmouseover=function () {
                    arr.style.display="block";
                    clearInterval(timeId);
                };
                box.onmouseout=function () {
                    arr.style.display="none";
                    timeId=setInterval(onmouseclickHandle,1000);
                };
             
                right.onclick=onmouseclickHandle;
                function onmouseclickHandle() {
                    //如果pic的值是5,恰巧是ul中li的个数-1的值,此时页面显示第六个图片,而用户会认为这是第一个图,
                    //所以,如果用户再次点击按钮,用户应该看到第二个图片
                    if (pic == list.length - 1) {
                        //如何从第6个图,跳转到第一个图
                        pic = 0;//先设置pic=0
                        ulObj.style.left = 0 + "px";//把ul的位置还原成开始的默认位置
                    }
                    pic++;//立刻设置pic加1,那么此时用户就会看到第二个图片了
                    animate(ulObj, -pic * imgWidth);//pic从0的值加1之后,pic的值是1,然后ul移动出去一个图片
                    //如果pic==5说明,此时显示第6个图(内容是第一张图片),第一个小按钮有颜色,
                    if (pic == list.length - 1) {
                        //第五个按钮颜色干掉
                        olObj.children[olObj.children.length - 1].className = "";
                        //第一个按钮颜色设置上
                        olObj.children[0].className = "current";
                    } else {
                        //干掉所有的小按钮的背景颜色
                        for (var i = 0; i < olObj.children.length; i++) {
                            olObj.children[i].removeAttribute("class");
                        }
                        olObj.children[pic].className = "current";
                    }
                }
                left.onclick=function () {
                    if (pic==0){
                        pic=list.length-1;
                        ulObj.style.left=-pic*imgWidth+"px";
                    }
                    pic--;
                    animate(ulObj,-pic*imgWidth);
                    for (var i = 0; i < olObj.children.length; i++) {
                        olObj.children[i].removeAttribute("class");
                    }
                    //当前的pic索引对应的按钮设置颜色
                    olObj.children[pic].className = "current";
                };
             
                //设置任意的一个元素,移动到指定的目标位置
                function animate(element, target) {
                    clearInterval(element.timeId);
                    //定时器的id值存储到对象的一个属性中
                    element.timeId = setInterval(function () {
                        //获取元素的当前的位置,数字类型
                        var current = element.offsetLeft;
                        //每次移动的距离
                        var step = 10;
                        step = current < target ? step : -step;
                        //当前移动到位置
                        current += step;
                        if (Math.abs(current - target) > Math.abs(step)) {
                            element.style.left = current + "px";
                        } else {
                            //清理定时器
                            clearInterval(element.timeId);
                            //直接到达目标
                            element.style.left = target + "px";
                        }
                    }, 10);
                }
            </script>
       
        </div>
  
        <div class="column right">
            <div class="cldBody">
                <table>
                    <thead>
                        <tr>
                            <td colspan="7">
                                <div class="top">
                                    <span id="left1">&lt;</span>
                                    <span id="topDate"></span>
                                    <span id="right1">&gt;</span>
                                </div>
                            </td>
                        </tr>
                        <tr id="week" >
                            <td>日</td>
                            <td>一</td>
                            <td>二</td>
                            <td>三</td>
                            <td>四</td>
                            <td>五</td>
                            <td>六</td>
                        </tr>
                    </thead>
                    <tbody id="tbody" ></tbody>
                </table>
            </div>
            <div id="time"></div>
            <script type="text/javascript">
                //1.添加月份到顶部
                var date = new Date();
                var year = date.getFullYear();
                var nowyear = date.getFullYear();
                var month = date.getMonth()+1;
                var nowmonth = date.getMonth()+1;
                var dateday = date.getDate();
                var todateHtml = year + '年'+ month + '月';
                $('#topDate').text(todateHtml);
                //2.添加日历函数
                function showcld(){
                    var monthDay = [31,28,31,30,31,30,31,31,30,31,30,31];  // 创建数组存放每个月有多少天 ,默认2月为28天
                    // 判断闰年
                    if(year % 4 == 0 && year %100 != 0 || year % 400 == 0){
                        monthDay[1] = 29;
                    }
                    // 计算每个月的天数
                    var days = monthDay[month-1];
                    // 判断每月第一天为周几
                    date.setYear(year);        //某年
                    date.setMonth(month-1);   //某年的某月
                    date.setDate(1);   // 某月的某天
                    var weekday = date.getDay();  // 判断某天是周几
                    // 补齐一号前的空格
                    var tbodyHtml = '<tr>';
                    for(var i = 0; i<weekday; i++){
                        tbodyHtml += "<td></td>";
                    }
                    // 补齐每月的日期
                    var changLine = weekday;
                    var tagClass = '';
                    for(i=1; i<=days; i++){//每一个日期的填充
                        if(year == nowyear && month == nowmonth && i == dateday) {
                                tagClass = "curDate";//当前日期对应格子
                                    }else{
                                        tagClass = "isDate";
                                    }
                        tbodyHtml += "<td class=" + tagClass + ">" + i + "</td>";
                        changLine = (changLine+1)%7;
                        if(changLine == 0 && i != days){//是否换行填充的判断
                            tbodyHtml += "</tr><tr>";
                        }
                        }
                    $('#tbody').empty();   // 清空原有的内容
                    $('#tbody').append(tbodyHtml);   //添加当前月份的日期内容
                    }
                    // 设置按钮点击事件
                    $('#left').click(function(){
                        month = month-1;
                        if(month < 1){
                                month = 12;
                                year--;
                        }
                        var todateHtml = year + '年'+ month + '月';
                        $('#topDate').text(todateHtml);
                        showcld();
                    });
        
                    $('#right').click(function(){
                        month = month+1;
                        if(month > 12){
                            month = 1;
                            year++;
                        }
                        var todateHtml = year + '年'+ month + '月';
                        $('#topDate').text(todateHtml);
                        showcld();
                    })
                    showcld();  //页面加载后执行函数
                    setInterval(function(){
              var time=new Date();
              var year=time.getFullYear();  //获取年份
              var month=time.getMonth()+1;  //获取月份
              var day=time.getDate();   //获取日期
              var hour=checkTime(time.getHours());   //获取时
              var minite=checkTime(time.getMinutes());  //获取分
              var second=checkTime(time.getSeconds());  //获取秒
              /****当时、分、秒、小于10时，则添加0****/
              function checkTime(i){
                  if(i<10) return "0"+i;
                  return i;
              }
              var box=document.getElementById("time");
              box.innerHTML=year+"年"+month+"月"+day+"日  "+hour+":"+minite+":"+second;		  
            },1000);     //setInterval(fn,i) 定时器，每隔i秒执行fn
            </script> 
        </div>
    </div>
    
</body>
</html>
